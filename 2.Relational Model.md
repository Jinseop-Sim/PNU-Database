# Relational Model(관계형 데이터베이스)
---
## What is Relation in Discrete Mathematics?
> 이산수학에서 Relation의 의미는 Subset of Cartesian Product, 좌표계의 부분집합이다.  

## Basic idea of Relational Model
- Structures(Schema)
  - Database : Set of Tables
  - Table : Relation R between A1, A2, ..., An ==> We can represent Relation to Table
    - R is Subset of A1 X A2 X .. X An = {(a1, a2, a3, .., an) | an is element of Ai}
    - Ai : Attributes
    - ai : Attributes Values
    - Schema : R(A1, A2, .., An) ==> Table of Relation
    - Tuple(Record) : (a1, a2, a3, .., an)
  - Sequence of make schema
    1. Make Attributes
    2. Which attribute will use as KEY?
- Example of Table  
![DBDBDB](https://user-images.githubusercontent.com/71700079/135829543-d445c02e-8234-454e-b547-8c9e2318b6ba.png)  
## Relation Schema
- Relation Schema
  - Relation name
  - Attributes, in order(+ types of attributes) (e.g. Beers(name, manufacturer) / Beers(name : string, manf : string)
  - Key definition
  - Any additional constraints
- Example
  - Schema : Movie(title, year, length, genre)
  - Primary Key로 쓰고 싶은 Attribute에는 밑줄을 긋는다.
  - UML Diagram으로 표현하면 Movie는 Class에 해당하며, 나머지 요소들은 하위 Attributes가 된다.

## Why we use Relational Model?
1. Table을 만드는 것은 매우 직관적인 일이다. ==> 간단하다!
2. Relation은 아주 강력한 수학적 표지이다.
3. Relational Model & SQL
  - Most important DB language ==> SQL
  - Not Procedural but declarative
4. Algebraic Background
  - Relational Algebra

## Schema definition in SQL
- SQL
  - Declarative Language for RDB
  - DDL(Data Definition Language) : Schema Definition
    - Table
    - View(External Layer of DB)
  - DML(Data Manipulation Language) : Querying
- Schema Definition in SQL(Example)
```SQL
CREATE TABLE Movies(
  title CHAR(100),
  year INT,
  length INT,
  genre CHAR(10),
  studioName CHAR(20),
  producerC# INT,
  PRIMARY KEY(title, year) -- movie# INT PRIMARY KEY, 이렇게도 Primary key를 선언할 수 있다.
)
```
- Modification
```SQL
DROP TABLE movies;
ALTER TABLE Movies ADD address CHAR(100);
ALTER TABLE Movies DROP producerC#;
```
- Default Values and Keys

## Relational Algebra
- Algebra : Set(Operands) + Operators
- In Relational Algebra
  - Operands : Relation(Table)
  - Operators : Relation Operators
    - Set operators : Union, Intersection, Difference
    - Selection : 행을 반환하는 연산자. (Closed)
      - Example : 3.5 학점 이상의 Student만 반환을 하고 싶은 경우, 아래와 같이 표기한다.  
        ![select](https://user-images.githubusercontent.com/71700079/137159316-591c05e2-4f04-4d2e-a11b-36e2114f754d.PNG)
    - Projection : 열을 반환하는 연산자. (Not Closed)
      - Example : 3.5 학점 이상의 Student들의 이름만 반환을 하고 싶은 경우, 아래와 같이 표기한다.  
        ![projection](https://user-images.githubusercontent.com/71700079/137159403-ba76abdd-1a5e-49fe-9ff0-60bffe7bd44b.PNG)
    - Join : 조건에 맞는 두 테이블을 Cartesian Product 시켜주는 연산자. (Not Closed)
      - Cartesian Product : 두 관계 테이블 R1, R2가 있을 때, 모든 원소들의 쌍을 또 하나의 Table로 표현하는 것.
      - 아래와 같이 표기한다.  
        ![Join](https://user-images.githubusercontent.com/71700079/137160394-6f797e84-41d7-4b71-86b4-0a904498a678.PNG)  
        ![Cartesian](https://user-images.githubusercontent.com/71700079/137160466-5620750a-68f2-4660-915b-88e478f9f8c1.PNG)  
      - Natural Join : Join 연산자의 조건이 __Equal__ 일 때, __Natural Join__ 이라고 하고, Join 조건이 생략 가능하다.
      - Theta Join : Equal을 제외한 나머지 __Boolean Condition__ 에 대해서는 조건을 표기를 해야하며, Theta join이라고 한다.
      - Join Example  
        ![NaturalJoin](https://user-images.githubusercontent.com/71700079/137161368-27c9fa35-54fa-4e71-80fc-c7aaa1f242b9.PNG)  
      - Join Operator Sequence : 아래와 같은 연산자 우선순위를 갖는다.  
        ![JoinExample](https://user-images.githubusercontent.com/71700079/137161585-d9a74530-6a17-46ec-a8a6-645b31869111.PNG)  
        ![캡처](https://user-images.githubusercontent.com/71700079/137161655-d18ec622-5228-486c-a1bd-3ee8e4252697.PNG)  
        ![캡처2](https://user-images.githubusercontent.com/71700079/137161680-939500cb-dc72-4650-8557-136e608e75fe.PNG)



